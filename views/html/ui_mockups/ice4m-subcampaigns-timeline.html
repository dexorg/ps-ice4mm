<div class="row main-container">
    <div class="col-md-12">
        <div class="form-group sm">
            <a><i class="fa fa-long-arrow-left" aria-hidden="true"></i> Back to Campaigns</a>
        </div>
    </div>
    <div class="col-md-6">
        <h1 class="secondary">Living better this time</h1>
    </div>
    <div class="col-md-6">
        <div class="form-group sm text-right action-group">
            <button href="#infoModal" data-toggle="modal" type="button" class="btn btn-lg btn-1 inverse"><span class="fa fa-info-circle"></span>&nbsp;&nbsp;Campaign details</button>
            <button type="button" class="btn btn-lg btn-1">New subcampaign</button>
        </div>
    </div>
    <div class="col-md-12">
        <div class="text-center action-group">
            <div class="tabs">
                <a><span class="fa fa-th"></span> Subcampaigns</a>
                <a class="active"><span class="fa fa-calendar"></span> Timeline</a>
                <a><span class="fa fa-pie-chart"></span> Performance</a>
            </div>
        </div>
    </div>
</div>

<div class="timeline-work-area">
    <div class="clearfix">
        <div class="pull-left">
            <p><b>Showing 7/7 scheduled subcampaigns</b></p>
            <div class="font-small">
                <span><span class="fa fa-circle success-color"></span> Performing well</span>&nbsp;&nbsp;&nbsp;&nbsp;
                <span><span class="fa fa-circle warning-color"></span> Some metrics need attention</span>&nbsp;&nbsp;&nbsp;&nbsp;
                <span><span class="fa fa-circle error-color"></span> Poor performance</span>
            </div>
            <br>
        </div>
        <div class="pull-right">
            <button href="#settingsModal" data-toggle="modal" class="btn btn-4"><span class="fa fa-cog"></span> Settings</button>
        </div>
    </div>
    <div class="timeline-work-area-inner">
        <div id="chart_div"></div>
    </div>
</div>


<!-- Sample settings modal -->
<div id="settingsModal" class="modal fade secondary sm">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Settings</h4>
            </div>
            <div class="modal-body">
                <p><b>Show timeline</b></p>
                <div class="checkbox">
                    <label>
                        <input checked type="checkbox"> Living better this time
                    </label>
                </div>
                <div class="checkbox">
                    <label>
                        <input checked type="checkbox"> Another published subcampaign
                    </label>
                </div>
                <div class="checkbox">
                    <label>
                        <input checked type="checkbox"> Living healthier
                    </label>
                </div>
                <div class="checkbox">
                    <label>
                        <input checked type="checkbox"> Living the life
                    </label>
                </div>
                <div class="checkbox">
                    <label>
                        <input checked type="checkbox"> Another example
                    </label>
                </div>
                <div class="checkbox">
                    <label>
                        <input checked type="checkbox"> Another example in the future
                    </label>
                </div>
                <div class="checkbox">
                    <label>
                        <input checked type="checkbox"> Another future subcampaign
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <a class="link-secondary font-small" data-dismiss="modal">Cancel</a>&nbsp;&nbsp;&nbsp;&nbsp;
                <button type="button" class="btn btn-lg btn-1">Save</button>
          </div>
        </div>
    </div>
</div>


<!-- Sample info modal -->
<div id="infoModal" class="modal fade secondary">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Living better this time</h4>
            </div>
            <div class="modal-body">
                <p>Associated campaigns</p>
                <span class="tag">Living healthier</span>
                <span class="tag">Another campaign</span>
                <p>Offer</p>
                <span class="tag">Super 4 Youth</span>
                <p>Touchpoints</p>
                <span class="tag">BBC Merc</span>
                <span class="tag">BCC Latest</span>
                <p>12 Subcampaigns</p>
                <span>
                    <b>Published:</b> 4<br>
                    <b>Scheduled:</b> 2
                </span>
            </div>
        </div>
    </div>
</div>



<script type="text/javascript">
    $( function() {

        //inside a timeout to wait for template to be rendered - temp workaround - should be changed to be called after template is loaded.
        setTimeout(function(){

            //google gantt charts - https://developers.google.com/chart/interactive/docs/gallery/ganttchart
            google.charts.load('current', {'packages':['gantt']});
            google.charts.setOnLoadCallback(drawChart);

            function drawChart() {

                var data = new google.visualization.DataTable();
                data.addColumn('string', 'Task ID');
                data.addColumn('string', 'Task Name');
                data.addColumn('string', 'Resource');
                data.addColumn('date', 'Start Date');
                data.addColumn('date', 'End Date');
                data.addColumn('number', 'Duration');
                data.addColumn('number', 'Percent Complete');
                data.addColumn('string', 'Dependencies');

                //will be reordered using start dates
                data.addRows([

                    //performing well first
                    ['01', 'Living better this time', 'Performing Well',
                    new Date(2018, 1, 14), new Date(2018, 3, 29), null, 100, null],
                    ['05', 'Another example', 'Performing Well',
                    new Date(2018, 3, 30), new Date(2018, 7, 8), null, 20, null],
                    ['03', 'Living healthier', 'Performing Well',
                    new Date(2018, 2, 14), new Date(2018, 3, 11), null, 100, null],

                    //Some metrics need attention
                    ['04', 'Living the life', 'Some metrics need attention',
                    new Date(2018, 3, 30), new Date(2018, 5, 9), null, 50, null],

                    //Poor Performance
                    ['02', 'Another published subcampaign', 'Poor Performance',
                    new Date(2018, 2, 03), new Date(2018, 5, 14), null, 75, null],

                    //No data collected - future campaigns
                    ['06', 'Another example in the future', 'No data collected',
                    new Date(2018, 4, 25), new Date(2018, 6, 18), null, 0, null],
                    ['07', 'Another future subcampaign', 'No data collected',
                    new Date(2018, 5, 15), new Date(2018, 7, 18), null, 0, null]
                ]);

                var options = {
                    //height will need to be adjusted based on data (needs to be at least 65px X number of campaigns)
                    height: 600,
                    gantt: {
                        trackHeight: 65,
                        criticalPathEnabled: false,
                        barCornerRadius: 13,
                        barHeight: 26,
                        innerGridDarkTrack: {
                            fill: '#ffffff'
                        },
                        labelStyle: {
                          fontName: "Oxygen"
                        },

                        //need to be in the same order as the data for the correct colors
                        palette: [
                          {
                            //performing well - green
                            "color": "#299d3d", //lighter - for second part of bar and label
                            "dark": "#2c7a39", //darker - for start of bar
                            "light": "#9bd0a5" //for when you click on other items
                          },
                          {
                            //Some metrics need attention - orange
                            "color": "#f17218",
                            "dark": "#d1531c",
                            "light": "#f1b095"
                          },
                          {
                            //Poor Performance - red
                            "color": "#e12c26",
                            "dark": "#B92621",
                            "light": "#de9b9b"
                          },
                          {
                            //No data collected - future campaigns - gray
                            "color": "#999",
                            "dark": "#999",
                            "light": "#f1f1f1"
                          }
                        ]
                    }
                }

                var chart = new google.visualization.Gantt(document.getElementById('timeline_chart_div'));
                chart.draw(data, options);

            }
        }, 3000);
    } );
  </script>
